/*! Built with http://stenciljs.com */
const{h:t}=window.App;import{matchPath as e}from"./chunk1.js";class n{render(){return t("stencil-router",null,t("stencil-route",{url:"/",component:"sn-menu",exact:!0}),t("stencil-route",{url:"/game",component:"sn-game"}),t("stencil-route",{url:"/gameover/:count",component:"sn-gameover"}))}static get is(){return"sn-app"}static get style(){return"header{background:grey;color:#fff;height:56px;display:flex;align-items:center;box-shadow:0 2px 5px 0 rgba(0,0,0,.26)}h1{font-size:1.4rem;font-weight:500;color:#fff;padding:0 12px}h2{text-align:center}main{display:flex;justify-content:center;align-items:center;flex-direction:column;min-height:60vh}.menu-item{margin:10px;text-align:center}button{border-radius:5px;background:#888;color:#fff;border:none;padding:10px;font-size:20px}"}}class o{constructor(){this.unsubscribe=(()=>{}),this.componentProps={},this.exact=!1,this.group=null,this.groupIndex=null,this.routeRender=null,this.match=null}computeMatch(t){return t||(t=this.activeRouter.get("location").pathname),e(t,{path:this.url,exact:this.exact,strict:!0})}componentWillLoad(){this.unsubscribe=this.activeRouter.subscribe(t=>(this.match=t?null:this.computeMatch(),this.match),this.group,this.groupIndex),this.group||(this.match=this.computeMatch())}componentDidUnload(){this.unsubscribe()}render(){if(!this.activeRouter||!this.match)return null;const e=Object.assign({},this.componentProps,{history:this.activeRouter.get("history"),match:this.match});if(this.routeRender)return this.routeRender(Object.assign({},e,{component:this.component}));if(this.component){const n=this.component;return t(n,Object.assign({},e))}}static get is(){return"stencil-route"}static get properties(){return{activeRouter:{context:"activeRouter"},component:{type:String,attr:"component"},componentProps:{type:"Any",attr:"component-props"},exact:{type:Boolean,attr:"exact"},group:{type:String,attr:"group"},groupIndex:{type:Number,attr:"group-index"},location:{context:"location"},match:{state:!0},routeRender:{type:"Any",attr:"route-render"},url:{type:"Any",attr:"url"}}}}function i(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}function s(t,e){return i(t,e)?t.substr(e.length):t}function r(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function a(t){return"/"===t.charAt(0)?t:"/"+t}function c(t){return"/"===t.charAt(0)?t.substr(1):t}function h(t){const{pathname:e,search:n,hash:o}=t;let i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:`?${n}`),o&&"#"!==o&&(i+="#"===o.charAt(0)?o:`#${o}`),i}function l(t){return"/"===t.charAt(0)}function u(t,e){for(let n=e,o=n+1,i=t.length;o<i;n+=1,o+=1)t[n]=t[o];t.pop()}function p(t,e,n,o){let i;"string"==typeof t?(i=function(t){let e=t||"/",n="",o="";const i=e.indexOf("#");-1!==i&&(o=e.substr(i),e=e.substr(0,i));const s=e.indexOf("?");return-1!==s&&(n=e.substr(s),e=e.substr(0,s)),{pathname:e,search:"?"===n?"":n,hash:"#"===o?"":o}}(t)).state=e:(void 0===(i=Object.assign({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}var s;return n&&(i.key=n),o?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(t,e=""){const n=t&&t.split("/")||[];let o=e&&e.split("/")||[];const i=t&&l(t),s=e&&l(e),r=i||s;if(t&&l(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";let a;if(o.length){const t=o[o.length-1];a="."===t||".."===t||""===t}else a=!1;let c=0;for(let t=o.length;t>=0;t--){const e=o[t];"."===e?u(o,t):".."===e?(u(o,t),c++):c&&(u(o,t),c--)}if(!r)for(;c--;c)o.unshift("..");!r||""===o[0]||o[0]&&l(o[0])||o.unshift("");let h=o.join("/");return a&&"/"!==h.substr(-1)&&(h+="/"),h}(i.pathname,o.pathname)):i.pathname=o.pathname:i.pathname||(i.pathname="/"),i.query=(s=i.search)?(/^[?#]/.test(s)?s.slice(1):s).split("&").reduce((t,e)=>{let[n,o]=e.split("=");return t[n]=o?decodeURIComponent(o.replace(/\+/g," ")):"",t},{}):{},i}function d(t,...e){t||console.error(...e)}function f(t,...e){t||console.warn(...e)}const g=()=>{let t,e=[];return{setPrompt:e=>(f(null==t,"A history supports only one prompt at a time"),t=e,()=>{t===e&&(t=null)}),confirmTransitionTo:(e,n,o,i)=>{if(null!=t){const s="function"==typeof t?t(e,n):t;"string"==typeof s?"function"==typeof o?o(s,i):(f(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==s)}else i(!0)},appendListener:t=>{let n=!0;const o=(...e)=>{n&&t(...e)};return e.push(o),()=>{n=!1,e=e.filter(t=>t!==o)}},notifyListeners:(...t)=>{e.forEach(e=>e(...t))}}},m=!("undefined"==typeof window||!window.document||!window.document.createElement),y=(t,e,n)=>t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n),w=(t,e,n)=>t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n),b=(t,e)=>e(window.confirm(t)),v=()=>{try{return window.history.state||{}}catch(t){return{}}},x={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+c(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:c,decodePath:a},slash:{encodePath:a,decodePath:a}},O=()=>{const t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},P=t=>{const e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},A={browser:(t={})=>{d(m,"Browser history needs a DOM");const e=window.history,n=(()=>{const t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history})(),o=!(()=>-1===window.navigator.userAgent.indexOf("Trident"))(),{forceRefresh:c=!1,getUserConfirmation:l=b,keyLength:u=6}=t,x=t.basename?r(a(t.basename)):"",O=t=>{t=t||{};const{key:e,state:n}=t,{pathname:o,search:r,hash:a}=window.location;let c=o+r+a;return f(!x||i(c,x),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+c+'" to begin with "'+x+'".'),x&&(c=s(c,x)),p(c,n,e)},P=()=>Math.random().toString(36).substr(2,u),A=g(),R=t=>{Object.assign(D,t),D.length=e.length,A.notifyListeners(D.location,D.action)},k=t=>{(t=>void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS"))(t)||E(O(t.state))},L=()=>{E(O(v()))};let S=!1;const E=t=>{if(S)S=!1,R();else{const e="POP";A.confirmTransitionTo(t,e,l,n=>{n?R({action:e,location:t}):T(t)})}},T=t=>{const e=D.location;let n=U.indexOf(e.key);-1===n&&(n=0);let o=U.indexOf(t.key);-1===o&&(o=0);const i=n-o;i&&(S=!0,C(i))},j=O(v());let U=[j.key];const H=t=>x+h(t),C=t=>{e.go(t)};let M=0;const I=t=>{1===(M+=t)?(y(window,"popstate",k),o&&y(window,"hashchange",L)):0===M&&(w(window,"popstate",k),o&&w(window,"hashchange",L))};let B=!1;const D={length:e.length,action:"POP",location:j,createHref:H,push:(t,o)=>{f(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const i=p(t,o,P(),D.location);A.confirmTransitionTo(i,"PUSH",l,t=>{if(!t)return;const o=H(i),{key:s,state:r}=i;if(n)if(e.pushState({key:s,state:r},null,o),c)window.location.href=o;else{const t=U.indexOf(D.location.key),e=U.slice(0,-1===t?0:t+1);e.push(i.key),U=e,R({action:"PUSH",location:i})}else f(void 0===r,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=o})},replace:(t,o)=>{f(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const i=p(t,o,P(),D.location);A.confirmTransitionTo(i,"REPLACE",l,t=>{if(!t)return;const o=H(i),{key:s,state:r}=i;if(n)if(e.replaceState({key:s,state:r},null,o),c)window.location.replace(o);else{const t=U.indexOf(D.location.key);-1!==t&&(U[t]=i.key),R({action:"REPLACE",location:i})}else f(void 0===r,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(o)})},go:C,goBack:()=>C(-1),goForward:()=>C(1),block:(t="")=>{const e=A.setPrompt(t);return B||(I(1),B=!0),()=>(B&&(B=!1,I(-1)),e())},listen:t=>{const e=A.appendListener(t);return I(1),()=>{I(-1),e()}}};return D},hash:(t={})=>{d(m,"Hash history needs a DOM");const e=window.history,n=(()=>-1===window.navigator.userAgent.indexOf("Firefox"))(),{getUserConfirmation:o=b,hashType:c="slash"}=t,l=t.basename?r(a(t.basename)):"",{encodePath:u,decodePath:v}=x[c],A=()=>{let t=v(O());return f(!l||i(t,l),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+l+'".'),l&&(t=s(t,l)),p(t)},L=g(),S=t=>{Object.assign($,t),$.length=e.length,L.notifyListeners($.location,$.action)};let E=!1,T=null;const j=()=>{const t=O(),e=u(t);if(t!==e)P(e);else{const t=A(),e=$.location;if(!E&&(k=t,(R=e).pathname===k.pathname&&R.search===k.search&&R.hash===k.hash&&R.key===k.key&&function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,o){return t(e,n[o])});const o=typeof e;if(o!==typeof n)return!1;if("object"===o){const o=e.valueOf(),i=n.valueOf();if(o!==e||i!==n)return t(o,i);const s=Object.keys(e),r=Object.keys(n);return s.length===r.length&&s.every(function(o){return t(e[o],n[o])})}return!1}(R.state,k.state)))return;if(T===h(t))return;T=null,U(t)}},U=t=>{if(E)E=!1,S();else{const e="POP";L.confirmTransitionTo(t,e,o,n=>{n?S({action:e,location:t}):H(t)})}},H=t=>{const e=$.location;let n=B.lastIndexOf(h(e));-1===n&&(n=0);let o=B.lastIndexOf(h(t));-1===o&&(o=0);const i=n-o;i&&(E=!0,D(i))},C=O(),M=u(C);C!==M&&P(M);const I=A();let B=[h(I)];const D=t=>{f(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)};let Y=0;const F=t=>{1===(Y+=t)?y(window,"hashchange",j):0===Y&&w(window,"hashchange",j)};let W=!1;const $={length:e.length,action:"POP",location:I,createHref:t=>"#"+u(l+h(t)),push:(t,e)=>{f(void 0===e,"Hash history cannot push state; it is ignored");const n=p(t,void 0,void 0,$.location);L.confirmTransitionTo(n,"PUSH",o,t=>{if(!t)return;const e=h(n),o=u(l+e);if(O()!==o){T=e,(t=>window.location.hash=t)(o);const t=B.lastIndexOf(h($.location)),i=B.slice(0,-1===t?0:t+1);i.push(e),B=i,S({action:"PUSH",location:n})}else f(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),S()})},replace:(t,e)=>{f(void 0===e,"Hash history cannot replace state; it is ignored");const n=p(t,void 0,void 0,$.location);L.confirmTransitionTo(n,"REPLACE",o,t=>{if(!t)return;const e=h(n),o=u(l+e);O()!==o&&(T=e,P(o));const i=B.indexOf(h($.location));-1!==i&&(B[i]=e),S({action:"REPLACE",location:n})})},go:D,goBack:()=>D(-1),goForward:()=>D(1),block:(t="")=>{const e=L.setPrompt(t);return W||(F(1),W=!0),()=>(W&&(W=!1,F(-1)),e())},listen:t=>{const e=L.appendListener(t);return F(1),()=>{F(-1),e()}}};return $}};var R,k;class L{constructor(){this.root="/",this.historyType="browser",this.titleSuffix="",this.unsubscribe=(()=>{}),this.match=null}titleSuffixChanged(t){this.activeRouter.set({titleSuffix:t})}computeMatch(t){return{path:this.root,url:this.root,isExact:t===this.root,params:{}}}componentWillLoad(){const t=A[this.historyType]();t.listen(t=>{this.activeRouter.set({location:this.getLocation(t)})}),this.activeRouter.set({location:this.getLocation(t.location),titleSuffix:this.titleSuffix,root:this.root,history:t}),this.unsubscribe=this.activeRouter.subscribe(()=>{this.match=this.computeMatch()}),this.match=this.computeMatch()}getLocation(t){const e=0==t.pathname.indexOf(this.root)?"/"+t.pathname.slice(this.root.length):t.pathname;return Object.assign({},t,{pathname:e})}componentDidUnload(){this.unsubscribe()}render(){return t("slot",null)}static get is(){return"stencil-router"}static get properties(){return{activeRouter:{context:"activeRouter"},historyType:{type:"Any",attr:"history-type"},match:{state:!0},root:{type:String,attr:"root"},titleSuffix:{type:String,attr:"title-suffix",watchCallbacks:["titleSuffixChanged"]}}}}export{n as SnApp,o as StencilRoute,L as StencilRouter};